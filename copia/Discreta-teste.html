<!DOCTYPE html>
<html>

<head>
    <!-- ajuda a acentuação -->
    <meta charset="utf8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>ES-Discreta</title>
    <div class="page-header">
        <h1>Easy Statics: Discreta</h1>
    </div>
    <div class="voltar">
        <button class="btn btn-lg btn-primary" onclick="voltar()">Voltar</button>
    </div>
    <style>
        .voltar {
            background-color: rgb(172, 172, 177);
            margin-top: 0;
            padding: 20px 20px 20px 30px;
            border: 1px solid black;
        }

        .page-header {
            background-color: #00E676;
            margin-top: 0;

            border: 2px solid black;
            text-align: center;
            -webkit-text-stroke-width: 1px;
            -webkit-text-stroke-color: #000000;
            font-family: fantasy;
            height: 120px;
        }

        /*
        #resultado,
        #combos {
            width: 34%;
            float: left;
            border: 2px solid black;
            height: 350px;
            background-color: rgb(248, 225, 97);
        }

        #combos {
            background-color: rgb(243, 102, 66);
            text-align: center;
            font-weight: bold
        }

        select {
            font-weight: bold;
            border: 2px solid black
        }

        body {
            background-color: whitesmoke
        }

        /*   #formu {
            position: relative;
            float: left;
            border-width: 2px;
            border: 2px solid black;
            width: 30%;
            height: 350px;
            background-color: rgb(247, 189, 83);
            text-align: center;
            font-weight: bold;
        }
*/
        textarea {
            border: 1px solid #000000;
            background: #ffffff;
            width: 80%;
            height: 110px;
            border-radius: 4px;
            -moz-border-radius: 4px;
            -webkit-border-radius: 4px;
            box-shadow: 1px 1px 2px #333333;
            -moz-box-shadow: 1px 1px 2px #333333;
            -webkit-box-shadow: 1px 1px 2px #333333;
            resize: none;
            font-weight: bold;
            font-size: 15px
        }

        input[type=text]:hover,
        textarea:hover {
            background: #ffffff;
            border: 1px solid #990000;
        }
    </style>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<link rel="stylesheet" type="text/javascript" media="screen" href="C:\Users\casa\Documents\GitHub\Easy-Statics\script\js\bootstrap.min.js">
<link rel="stylesheet" media="screen" href="C:\Users\casa\Documents\GitHub\Easy-Statics\css\css\bootstrap.css">
<link rel="stylesheet" media="screen" href="C:\Users\casa\Documents\GitHub\Easy-Statics\css\estilos.css">


<script type="text/javascript">
    function voltar() {
        location.href = "https://quebramedos.github.io/Easy-Statics/"
    }
    //vetor discreta 

    let vet100
    let vetor = []
    let somatoriaFi = 0;
    let str

    function botao() {
        str = document.getElementById('input').value
        str = str.replace(/,/g, ".")
        vet100 = (str.split(' ').map(Number));
        console.log(vet100)
        return vet100

    }
    let est = 0;

    function estima() {
        var i

        for (i = 0; i < document.estimacao.quan.length; i++) {
            if (document.estimacao.quan[i].checked) {
                break;
            }
        }
        return est = document.estimacao.quan[i].value
    }

    function total() {

        let vetorLimpo = [] //vetor sem repetiçoes
        let cont = 0 //para contar variaveis
        // let vetor = [] //vetor de objetos
        let maior = 0 //maior frequencia
        let moda = 0
        let grafico1 = [] //cria os indices do grafico
        let grafico2 = [] //cria as colunas do grafico
        //organiza o vetor
        //--------------------------------------------------------------------------------------------
        function diretasort(vet) {
            let aux = 0;
            let menor = 0;

            for (let i = 0; i < vet.length; ++i) {
                menor = i //primeiro atribui o valor para parametro                           
                for (let j = i + 1; j < vet.length; ++j) { // atribui j = a i mais 1
                    if (vet[menor] > vet[j]) { //compara as posiçoes
                        menor = j //atribui o indice para troca                    
                    }
                }
                aux = vet[menor]
                vet[menor] = vet[i] //troca o menor valor
                vet[i] = aux //troca o maior valor
                //limpa vetor
            }
            vetorLimpo = vet.filter(function (este, i) {
                return vet.indexOf(este) == i;
            })
        }

        //-----------------------------------------------------------
        //chama funçar organizar
        diretasort(vet100)

        //-- clonar objeto
        let obj = {
            variavelPesquisada: '',
            frequencia: '',
            frequenciaPor: '',
            fac: '',
            facPorcentagem: '',
            somaVariavel: '',
            posiçao: ''
        }
        let posi = 1
        // atribui o objeto para as copias
        for (let i = 0; i < vetorLimpo.length; ++i) {
            vetor[i] = Object.assign({}, obj);
            vetor[i].variavelPesquisada = vetorLimpo[i]
            vetor[i].posiçao = posi
            posi++
        }
        // { a: 1 }
        //   vetor.push(obj)
        //-----------------------------------------------------------------

        //joga frequencia
        for (let x = 0; x < vetorLimpo.length; x++) {
            cont = 0
            for (let y = vet100.length; y >= 0; y--) {
                if (vetorLimpo[x] === vet100[y]) {
                    cont++;
                }
            }
            vetor[x].frequencia = cont // jo NO OBJeto
        }
        //-------------------------------------------------------------
        //frequencia acumulada
        let vet3 = [];
        let aux = 0;

        function fac() {
            vet3[0] = vetor[0].frequencia
            aux = vetor[0].frequencia
            vetor[0].fac = vetor[0].frequencia
            let acumu = 1
            for (var x = 1; x < vetorLimpo.length; x++) {

                aux += vetor[acumu].frequencia;
                console.log(aux)
                vet3[x] = aux
                vetor[x].fac = vet3[x]
                acumu++
            }
            return vetor
        }
        //chama funçao frequencia acumulada
        fac()

        //---------------------------------------------------------------------
        //calcula a moda
        function funModa() {
            maior = vetor[0].frequencia
            for (let i = 0; i < vetor.length; ++i) {
                // ignorar propriedades herdadas

                if (vetor[i].frequencia >= maior) {
                    maior = vetor[i].frequencia;
                    moda = vetor[i].variavelPesquisada
                }
            }
            return moda
        }
        funModa()
        //----------------------------------------------------------------
        // Calcular a Média
        let media = 0;

        function funMedia() {

            let divisor = 0;
            let dividendo = 0;

            for (let i = 0; i < vetor.length; i++) {
                dividendo += vetor[i].variavelPesquisada * vetor[i].frequencia;
                divisor += vetor[i].frequencia;
            }
            media = parseFloat((dividendo / divisor).toFixed(2));
            return (media)
        }
        funMedia()
        //-----------------------------------------------------------------------------
        // Calcular Mediana
        let mediana = 0;

        function funMediana() {

            let somatoria = 0;
            let posicao = 0;
            // Calcula a somatória do fi
            for (let i = 0; i < vetor.length; i++) {
                somatoria += vetor[i].frequencia;
            }
            mediana = somatoria / 2;

            // Verifica a posião 
            for (let i = 0; i < vetor.length; i++) {
                if (mediana <= vetor[i].fac) {
                    mediana = vetor[i].variavelPesquisada
                    break;
                }
            }
            return mediana;
        }
        funMediana()
        //-----------------------------------------------------------------
        //desvio padrao
        let coificiente = 0
        let desvioPadrao = 0
        let aux2 = 0
        let aux3 = 0


        function funDesvio() {
            for (let i = 0; i < vetor.length; ++i) {
                aux2 = parseFloat(vetor[i].variavelPesquisada - media).toFixed(2)
                // tira a media da variavel
                //desvio padrao recebe frequencia - media elevado ao quadrado
                desvioPadrao += parseFloat((Math.pow(aux2, 2) * vetor[i].frequencia).toFixed(2))
                //+ desvioPadrao)
            }
            aux3 = desvioPadrao / (aux - est) //auxiliar para receber o desvio
            desvioPadrao = parseFloat(Math.sqrt(aux3).toFixed(2))
            //--------------------------------------------------------------
            //coificiente padrao
            coificiente = Math.round((desvioPadrao / media) * 100)
        }
        funDesvio() //chama funçao desvio padrao

        //CALCULA A O TOTAL DE fi
        function somaFi() {
            somatoriaFi = 0
            for (let i = 0; i < vetor.length - 1; i++) {
                somatoriaFi += vetor[i].variavelPesquisada;
                vetor[i].somaVariavel = somatoriaFi
            }
            return somatoriaFi
        }
        somaFi();
        console.log(vetor)
        //Medidas separatrizes
        let Q = 0
        let k = 0
        let param;
        //-------------------------------------------------------------------
        //cria 1 tabela
        var HTML = "<table align=center class='table table-striped table-dark'><tr> ";
        HTML += ('<h3 align = center>TABELA</h3>')
        HTML += '<th>Variavel Pesquisada(xi)</th><th>Frequencia(fi)</th>'
        HTML += '<th>Frequencia%(fi%)</th><th>Frequencia Acumulada</th><th>Fac %</th></tr>'
        let totalfac = 0
        for (let linha = 0; linha < vetorLimpo.length; ++linha) {
            //calculos frequencia
            vetor[linha].frequenciaPor = Math.round((vetor[linha].frequencia / vet100.length) * 100)
            vetor[linha].facPorcentagem += Math.round((vetor[linha].fac / vet100.length) * 100)
            totalfac = Math.round(vetor[linha].facPorcentagem)
            //atribuiçao
            HTML += ('<tr>')
            //primeira coluna
            HTML += '<td>' + vetorLimpo[linha] + '</td><td>' + vetor[linha].frequencia + '</td>' //terceira coluna
            //terceira coluna
            HTML += '<td>' + Math.round((vetor[linha].frequencia / vet100.length) * 100) + '%' + '</td>' //quarta coluna
            //quarta coluna
            HTML += '<td>' + parseInt((vetor[linha].fac)) + '</td>'
            //coluna fac porcentagem
            HTML += '<td>' + (vetor[linha].facPorcentagem) + '%' + '</td>'
        }
        HTML += ('<tr><td text="bold">' + 'Total: ' + vetor[vetor.length - 1].somaVariavel + '</td>' + '<td>' + vet100.length +
            '</td>')
        HTML += ('<td>' + totalfac + '%' + '</td>' + '<td>' + vet100.length + '</td><td>' + " " + '</td>')
        HTML += "</tr></table>"; //fecha tabela
        document.getElementById("outputDiv").innerHTML = HTML; //atribui no div
        totalfac = 0
        //-------------------------------------------------------------------------
        //resultados------------------------------------------------------------------
        var tbl_resul = "<table align=center class='table table-striped table-dark'><tr>";
        tbl_resul += ('<h3 align = center>RESULTADOS</h3>')

        tbl_resul += ('<tr>')
        tbl_resul += (
            '<th>Media(x)</th><th>Moda(Mo)</th><th>Mediana(Md)</th><th>Desvio Padrao(dx)</th><th>Coificiente Padrão</th>'
        )
        tbl_resul += ('</tr>') //primeira linha
        tbl_resul += ('<tr>')
        //primeira coluna
        tbl_resul += ('<td>' + media + '</td><td>' + moda + '</td>')
        //terceira coluna
        tbl_resul += ('<td>' + mediana + '</td>')
        //quarta coluna
        tbl_resul += ('<td>' + desvioPadrao + '</td>')
        tbl_resul += ('<td>' + coificiente + '%' + '</td>')
        tbl_resul += ('</tr></table>')
        document.getElementById("outresultado").innerHTML = tbl_resul; //atribui no div
        //------------------------------------------------------------------------------
        //Tabela Quartil---------------------------------------------------------------------
        return vetor, somatoriaFi
    } //final funçao total
    //-------------------------------------------
    let resposta

    function separatrizes(parametro, vet, medida) {
        // calculo porcentagem
        for (let j = 0; j < vet.length; ++j) {
            Q = (somatoriaFi * parametro) / 100;
            if (Q <= vet[j].somaVariavel) { //pesquisa o objeto e acha o lugar
                return resposta = ('<h3>' + medida + '(' + Q + ')' +
                    vet[j].posiçao + "ºPosição" + '</h3>');
            }
            resposta = ''
        }
    }
    let Quartil = 'Quartil'

    function casosQuartil(vetor) {
        let opçoes = document.getElementById("C_quartil").value
        switch (opçoes) {
            case "Q1":
                separatrizes(25, vetor, Quartil)
                document.getElementById("resultado").innerHTML = resposta
                break;
            case "Q2":
                separatrizes(50, vetor, Quartil)
                document.getElementById("resultado").innerHTML = resposta
                break;
            case "Q3":
                separatrizes(75, vetor, Quartil)
                document.getElementById("resultado").innerHTML = resposta
                break;
            case "Q4":
                separatrizes(100, vetor, Quartil)
                document.getElementById("resultado").innerHTML = resposta
                break;
            default:
        }
    }
    let Quintil = "Quintil"

    function casosQuintil(vetor) {
        let opçoes = document.getElementById("C_quintil").value
        switch (opçoes) {
            case "k1":
                separatrizes(20, vetor, Quintil)
                document.getElementById("resultado").innerHTML = resposta
                break;
            case "K2":
                separatrizes(40, vetor, Quintil)
                document.getElementById("resultado").innerHTML = resposta
                break;
            case "K3":
                separatrizes(60, vetor, Quintil)
                document.getElementById("resultado").innerHTML = resposta
                break;
            case "K4":
                separatrizes(80, vetor, Quintil)
                document.getElementById("resultado").innerHTML = resposta
                break;
            case "K5":
                separatrizes(100, vetor, Quintil)
                document.getElementById("resultado").innerHTML = resposta
                break;
            default:
        }
        $("#myTab li").on("click", function () {
            $(".nav a").removeClass("active");
            $(this).addClass("active");

        })
    }
    //---------------------------------------------------------------------
</script>

<body>

    <div class="container border border-dark">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs nav-justify" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
                    aria-selected="true">Dados</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
                    aria-selected="false">Separatrizes</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="messages-tab" data-toggle="tab" href="#messages" role="tab" aria-controls="messages"
                    aria-selected="false">Messages</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="settings-tab" data-toggle="tab" href="#settings" role="tab" aria-controls="settings"
                    aria-selected="false">Settings</a>
            </li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content">
            <div class="tab-pane active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <h2>Selecione a Estimação:</h2>
                <form name="estimacao" onchange="estima()">
                    <input type="radio" name="quan" value=0 />População<br />
                    <input type="radio" name="quan" value=1 />Amostra <br />
                </form>
                <h2>Digite os Dados:</h2>
                <form class="formulario-validacao" id="form">
                    <textarea type="text" id='input' name="campo" autocomplete="off" placeholder="DIGITE OS NUMEROS COM ESPAÇOS EX: 10 20 30 40           
            "></textarea>
                    <br>
                    <button class="btn btn-lg btn-primary" type="button" name="submit" value="Enviar" onclick="botao(this.form),total()">Enviar</button>
                </form>
            </div>


            <div class="tab-pane active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <h2>Selecione as Medidas: </h2>
                <label for="">Quartil(Q):</label>
                <select id="C_quartil" class="custom-select">
                    <option value="zero"></option>
                    <option value="Q1">Quartil 1</option>
                    <option value="Q2">Quartil 2</option>
                    <option value="Q3">Quartil 3</option>
                    <option value="Q4">Quartil 4</option>
                </select>
                <br> <br>
                <label for="">Quintil(K):</label>
                <select class="combo custom-select" id="C_quintil">
                    <option value="zero"></option>
                    <option value="K1">Quintil 1</option>
                    <option value="K2">Quintil 2</option>
                    <option value="K3">Quintil 3</option>
                    <option value="K4">Quintil 4</option>
                    <option value="K5">Quintil 5</option>
                </select>
                <br><br>
                <label for="">Decil(D):</label>
                <select class="combo custom-select" id="C_decil">
                    <option value="zero"></option>
                    <option value="D1">Decil 1</option>
                    <option value="D2">Decil 2</option>
                    <option value="D3">Decil 3</option>
                    <option value="D4">Decil 4</option>
                    <option value="D5">Decil 5</option>
                    <option value="D6">Decil 6</option>
                    <option value="D7">Decil 7</option>
                    <option value="D8">Decil 8</option>
                    <option value="D9">Decil 9</option>
                    <option value="D10">Decil 10</option>
                </select>
                <br><br>
                <label>Percentil(P):</label>
                <input id="input_p" size=3>
                <br>
                <br>
                <br>
                <button onclick="casosQuartil(vetor),casosQuintil(vetor)">Enviar</button>
            </div>


            <div class="tab-pane" id="messages" role="tabpanel" aria-labelledby="messages-tab">bla</div>
            <div class="tab-pane" id="settings" role="tabpanel" aria-labelledby="settings-tab">
                aodiapsdkaksi09diqeoi
            </div>
        </div>







    </div>
    <!------------------------------------------------------------------------------- -->


    <!--<div id="resultado">
        <textarea type="text" name="in" id="teste"></textarea>
</div>>-->
    <div id="outresultado"></div>
    <br>
    <div id="outputDiv"></div>
    <br>


</body>

</html>